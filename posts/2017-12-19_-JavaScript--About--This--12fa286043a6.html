<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>[JavaScript] About “This”</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">[JavaScript] About “This”</h1>
</header>
<section data-field="subtitle" class="p-summary">
This하면 여러개의 기초 개념들을 알고 있어야 하는데, 지금 막 떠오르는 단어들은 Closure, 함수의 메소드인 call, apply 정도가 생각난다.물론 기초도 부족하지만 this를 공부하다보니 어느정도 정리가 되어 가는것 같아 이해한 부분까지…
</section>
<section data-field="body" class="e-content">
<section name="e491" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="0c8a" id="0c8a" class="graf graf--h3 graf--leading graf--title">[JavaScript] About “This”</h3><p name="a60e" id="a60e" class="graf graf--p graf-after--h3">This하면 여러개의 기초 개념들을 알고 있어야 하는데, 지금 막 떠오르는 단어들은 Closure, 함수의 메소드인 call, apply 정도가 생각난다.물론 기초도 부족하지만 this를 공부하다보니 어느정도 정리가 되어 가는것 같아 이해한 부분까지 정리를 한다.</p><p name="49b7" id="49b7" class="graf graf--p graf-after--p">this 에 대한 이해부분은 워낙에 범위도 넓고 예외적인 상황도 있는 것 같아 이번 포스팅에서 모든걸 정리할 수는 없을 것 같다.</p><p name="5532" id="5532" class="graf graf--p graf-after--p">그래도 어느정도 초보자 관점에서 이해를 돕고자 정리한다.</p><p name="9339" id="9339" class="graf graf--p graf-after--p">먼저 나는 많은 언어를 다뤄보지는 않았지만, (다뤄봤다 하더라도 학부때 다뤘던 C나 java가 전부..) 상식선에서 javascript의 this 라는 단어가 이해가 되지 않았다.</p><p name="93ca" id="93ca" class="graf graf--p graf-after--p">만약 함수 내부에서 this를 호출하게되면 해당 함수 내부에서 실행이 되었기 때문에 당연히 함수 object가 this가 가리키는 것이 될줄 알았다.</p><p name="6441" id="6441" class="graf graf--p graf-after--p">물론 그런 경우도 있지만 아닌 경우도 있다.</p><p name="4fb0" id="4fb0" class="graf graf--p graf-after--p">this를 정의하자면 아래와 같이 정의할 수 있다.</p><blockquote name="00f7" id="00f7" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“this”는 생성자라는 문맥에서 생성되는 인스턴스를 나타낸다.</blockquote><p name="001c" id="001c" class="graf graf--p graf-after--blockquote graf--trailing">위 말 뜻으로는 이해가 조금 덜 갈수도 있어서 아래와 같이 분류를 하고 this가 가리키는 것을 하나씩 짚어보자.</p></div></div></section><section name="51f2" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="36d3" id="36d3" class="graf graf--h3 graf--leading">global ( window )</h3><blockquote name="cc43" id="cc43" class="graf graf--blockquote graf-after--h3">This는 Default로 global 객체 window를 가리킨다.</blockquote><p name="2fd7" id="2fd7" class="graf graf--p graf-after--blockquote">첫번째로 생성자를 통해 인스턴스를 생성하지 않았을 경우 일반적으로는 this는 모두 global 객체를 가리키게 되어있다.</p><p name="6ff0" id="6ff0" class="graf graf--p graf-after--p">this가 가리키는 대상이 global일 경우 Atom에서 실행하면 undefined가 떠서 위의 뜻을 정확하게 이해하지 못했었다.</p><p name="61a5" id="61a5" class="graf graf--p graf-after--p">하지만 Chrome을 이용해서는 위 내용을 확인해 볼 수 있었다.</p><p name="776f" id="776f" class="graf graf--p graf-after--p">아래는 Chrome Console을 이용하여 test라는 function을 생성하고 내부에서 this가 가리키는 값을 찍기 위한 아주 간단한 코드이다.</p><figure name="a871" id="a871" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 540px; max-height: 126px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 23.3%;"></div><img class="graf-image" data-image-id="1*lqEQx5i3ZtjYROlKPxlFrg.png" data-width="540" data-height="126" src="https://cdn-images-1.medium.com/max/800/1*lqEQx5i3ZtjYROlKPxlFrg.png"></div><figcaption class="imageCaption">global this</figcaption></figure><p name="190a" id="190a" class="graf graf--p graf-after--figure">위처럼 this는 Global 객체인 window를 가리키고 있다. <br>( Atom에서 같은 테스트를 해보면 undefined가 발생된다. 참고!)</p><blockquote name="8fed" id="8fed" class="graf graf--pullquote graf-after--p">그래서 this는 생성자를 통해 생성되지 않았거나, 밑에 설명할 나머지 조건들에 충족이 되지 않으면 Global 객체인 window를 가리키게 된다.</blockquote><h3 name="b753" id="b753" class="graf graf--h3 graf-after--pullquote">Method</h3><blockquote name="7ab0" id="7ab0" class="graf graf--blockquote graf-after--h3">method에 사용되는 this는 자기 자신을 나타낸다.</blockquote><p name="3a5f" id="3a5f" class="graf graf--p graf-after--blockquote">javascript에서 bulit-in 되어 있는 javascript object 들이 있으며 <br><em class="markup--em markup--p-em">(ex&gt; String, Array, Boolean, Math ….)</em></p><p name="537e" id="537e" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">이러한 bulit-in object들은 각각 메소드를 갖고 있다.</em> <br><em class="markup--em markup--p-em">(ex&gt; push(), pop(), toString …)</em></p><p name="fb0c" id="fb0c" class="graf graf--p graf-after--p">이러한 Method들을 사용하는 방법은 모두 잘알겠지만, <code class="markup--code markup--p-code">arr.push(3)</code> 로 예를 들어 보겠다.</p><p name="416c" id="416c" class="graf graf--p graf-after--p">arr.push(3) 란 <strong class="markup--strong markup--p-strong">“arr(target) 라는 배열 인수값을 가진 놈의 배열의 끝에 3 이라는 숫자 값을 붙이겠다.” </strong>라고 이해할 수 있다.</p><p name="4fcb" id="4fcb" class="graf graf--p graf-after--p">그리고 arr은 어떻게 생성되었는가 하면 <code class="markup--code markup--p-code">var arr = new Array();</code>로 하여 Array라는 javascript가 가지고 있는 constructor를 arr가 그대로 상속 받아서 Array가 가지고 있는 메소드들을 모두 사용 할 수 있게 한다.</p><p name="184d" id="184d" class="graf graf--p graf-after--p">위처럼 Array Object를 new로 하여 arr가 상속 받게 되는 구조는 위에서 설명한 This의 개념과 부합하게 된다. <br>(”this”는 생성자라는 문맥에서 생성되는 인스턴스를 나타낸다.)</p><p name="3b2c" id="3b2c" class="graf graf--p graf-after--p">조금더 설명을 하자면 Array 라는 Object도 내부적으로 함수를 가지고 있어서, 해당 메소드로 호출 될때 메소드에 해당하는 결과값을 리턴하게 될텐데 그 함수 안에서도 this를 사용하게 된다. 이 때 가리키는 this는 자기 자신을 나타내게 된다.</p><p name="66db" id="66db" class="graf graf--p graf-after--p">사실 이부분은 this의 개념으로만 알고 있으면 될것 같다.</p><h3 name="28d1" id="28d1" class="graf graf--h3 graf-after--p">call,apply</h3><blockquote name="784f" id="784f" class="graf graf--blockquote graf-after--h3">Function 의 method인 call이나 apply는 this의 범위를 지정해 주기 위한 메소드 이다.</blockquote><ul class="postList"><li name="8f33" id="8f33" class="graf graf--li graf-after--blockquote">이해를 돕고자 아래는 함수 사용 구문이다.</li><li name="e2e2" id="e2e2" class="graf graf--li graf-after--li">링크를 따라가면 위키피디아를 확인 할 수 있다.<br><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Function/call" data-href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Function/call" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">[fun.call(thisArg[, arg1[, arg2[, …]]]]</a></li></ul><p name="eae1" id="eae1" class="graf graf--p graf-after--li">call, apply 이해하는데 상당히 까다로웠으나, 초보개발자로서 이해범위를 약간 줄여서 이해한 부분들을 설명한다.</p><p name="acef" id="acef" class="graf graf--p graf-after--p">먼저 처음에 Global을 설명 할때 사용한 예제를 사용해서 예를 들어 보면 이렇다.</p><pre name="b38f" id="b38f" class="graf graf--pre graf-after--p">function test(str) {<br>  return this;<br>}<br>console.log(test);</pre><p name="2574" id="2574" class="graf graf--p graf-after--pre">위에서 this가 가리키는 것은 window global 객체를 가리키고 있다.</p><p name="02a2" id="02a2" class="graf graf--p graf-after--p">근데 만약에 call 메소드를 써서 this가 가리키는 곳을 지정해 줄수 있다.</p><p name="6519" id="6519" class="graf graf--p graf-after--p">아래 예제를 보자.</p><pre name="ab9d" id="ab9d" class="graf graf--pre graf-after--p">function test(str) {<br> return this.a;<br>}<br>var obj = {<br>  &#39;a&#39; : 1<br>};<br>console.log(test.call(obj));   // 1</pre><p name="5225" id="5225" class="graf graf--p graf-after--pre">위 코드의 결과값으로는 ‘1′이 찍히게된다. 이유는 call 명령어를 사용하여 this가 가리키는 곳(obj)을 지정해주었고 test함수에서 this.a를 return 했을 때 obj 객체에 있는 a 키값을 가진놈을 호출하게 되어 1이 리턴되게 된다. call이나 apply 함수는 첫번째 인자값으로 null을 default 값으로 가진다.</p><h3 name="14b9" id="14b9" class="graf graf--h3 graf-after--p">new constructor</h3><p name="2353" id="2353" class="graf graf--p graf-after--h3">생성자를 통해 새로운 인스턴스를 생성했을때, 그때 this는 인스턴스를 나타낸다.</p><p name="782e" id="782e" class="graf graf--p graf-after--p">비슷한 내용을 method에서도 했는데, 위키피디아에 있는 예제를 보며 설명을 하겠다.</p><p name="13ba" id="13ba" class="graf graf--p graf-after--p">아래는 Product 라는 함수 객체와 Food라는 함수 객체를 생성 한 후 Food라는 생성자를 통해 cheese라는 인스턴스를 생성하는 과정이다.</p><p name="4b78" id="4b78" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">var cheese = new Food(&#39;feta&#39;, 5);</code> 와 같이 하게되면 new Food 를 통해 cheese 인스턴스를 생성하게되고 Food 함수를 들여다보면 Product.call을 하게되는데 이때 첫번째 인자가 this가 되게 된다.</p><p name="7838" id="7838" class="graf graf--p graf-after--p">이때의 this는 생성자를 통해 만든 Food {}가 되게 된다.</p><pre name="1a14" id="1a14" class="graf graf--pre graf-after--p">function Product(name, price) {<br>  this.name = name;<br>  this.price = price;<br>}<br>function Food(name, price) {<br> console.log(this);                         // Food {}<br> Product.call(this, name, price);<br> this.category = &#39;food&#39;;<br>}<br>var cheese = new Food(&#39;feta&#39;, 5);</pre><p name="a9fa" id="a9fa" class="graf graf--p graf-after--pre graf--trailing">bind 는 아직 공부를 못했으니 다음번에 포스팅하도록..</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@lyhlg0201" class="p-author h-card">이용현</a> on <a href="https://medium.com/p/12fa286043a6"><time class="dt-published" datetime="2017-12-19T04:32:13.668Z">December 19, 2017</time></a>.</p><p><a href="https://medium.com/@lyhlg0201/javascript-about-this-12fa286043a6" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 5, 2020.</p></footer></article></body></html>